{
    "version": 3,
    "sources": [
        "../../../src/common/controller/base.js"
    ],
    "names": [
        "init",
        "http",
        "self",
        "env",
        "configs",
        "static",
        "meta_title",
        "assign",
        "src",
        "hash",
        "GlobalStaticHash",
        "JSON",
        "parse",
        "readFileSync",
        "result",
        "iscss",
        "indexOf",
        "replace",
        "e",
        "__before",
        "DeviceWidth",
        "goto",
        "type",
        "myroute",
        "checkMobile",
        "userAgent",
        "controller",
        "action",
        "think",
        "base"
    ],
    "mappings": "AAAA;;;;;;;;;;;;;;;;;;;;;;;;AACA;;;;;;;;;;;;;;mBAGEA,I,iBAAKC,I,EAAM;AACT,oCAAMD,IAAN,YAAWC,IAAX;AACA,QAAIC,OAAO,IAAX;AACA,SAAKC,GAAL,GAAWC,QAAQD,GAAnB;AACA,SAAKE,MAAL,GAAcD,QAAQC,MAAtB;AACA,SAAKC,UAAL,GAAkB,IAAlB;AACA;AACA;AACA;AACA;AACA,SAAKC,MAAL,CAAY,YAAZ,EAA0B,UAASC,GAAT,EAAc;AACtC,UAAI;AACF,YAAIN,KAAKC,GAAL,IAAY,KAAhB,EAAuB;AACrB,cAAIM,OAAOC,gBAAX;AACA,cAAID,QAAQ,IAAR,IAAgBA,QAAQ,EAA5B,EAAgC;AAC9BA,mBAAOE,KAAKC,KAAL,CAAW,aAAGC,YAAH,CAAgB,qBAAqBX,KAAKC,GAA1B,GAAgC,OAAhD,EAAyD,MAAzD,CAAX,CAAP;AACD;AACDO,6BAAmBD,IAAnB;AACA,cAAIK,SAAS,IAAb;AACA,cAAIC,QAAQ,KAAZ;AACA,cAAIP,IAAIQ,OAAJ,CAAY,KAAZ,IAAqB,CAAC,CAA1B,EAA6B;AAC3BF,qBAASL,KAAKD,IAAIS,OAAJ,CAAY,MAAZ,EAAoB,EAApB,CAAL,CAAT;AACD,WAFD,MAEO;AACLF,oBAAQ,IAAR;AACAD,qBAASL,KAAKD,IAAIS,OAAJ,CAAY,OAAZ,EAAqB,EAArB,CAAL,CAAT;AACD;AACDH,mBAASA,UAAU,IAAV,GAAiBZ,KAAKG,MAAL,GAAcG,GAA/B,GAAqCN,KAAKG,MAAL,GAAcS,MAA5D;AACA,iBAAOA,SAASC,QAAQD,OAAOG,OAAP,CAAe,KAAf,EAAsB,MAAtB,CAAR,GAAwCH,MAAxD;AACD;AACD,eAAOZ,KAAKG,MAAL,GAAcG,GAArB;AACD,OAnBD,CAmBE,OAAOU,CAAP,EAAU;AACV,eAAOhB,KAAKG,MAAL,GAAcG,GAArB;AACD;AACF,KAvBD;AAwBD,G;;AAED;mBACMW,Q;;;;;;AACJ,mBAAKC,WAAL,GAAmB,GAAnB;;;;;;;;;;;;;;;;;AAGF;mBACAC,I,iBAAKC,I,EAAM;AACT,QAAIC,UAAUD,QAAQ,IAAR,GAAgB,CAACE,YAAY,KAAKC,SAAL,EAAZ,CAAD,GAAiC,EAAjC,GAAsC,UAAtD,GAAoEH,QAAQ,IAAR,GAAe,UAAf,GAA4B,EAA9G;AACA,WAAU,KAAKrB,IAAL,CAAUyB,UAApB,SAAkC,KAAKzB,IAAL,CAAU0B,MAA5C,GAAqDJ,OAArD;AACD,G;;;EA9C0BK,MAAMF,UAAN,CAAiBG,I;;;AA+C7C",
    "file": "../../../src/common/controller/base.js",
    "sourcesContent": [
        "'use strict';\nimport fs from 'fs';\n\nexport default class extends think.controller.base {\n  init(http) {\n    super.init(http);\n    let self = this;\n    this.env = configs.env;\n    this.static = configs.static;\n    this.meta_title = '首页';\n    // if (this.env == 'dev') {\n    //   this.static = '/';\n    //   this.env = 'prd';\n    // }\n    this.assign('StaticHash', function(src) {\n      try {\n        if (self.env != 'dev') {\n          let hash = GlobalStaticHash;\n          if (hash == null || hash == '') {\n            hash = JSON.parse(fs.readFileSync('www/static/hash.' + self.env + '.json', 'utf8'));\n          }\n          GlobalStaticHash = hash;\n          let result = null;\n          let iscss = false;\n          if (src.indexOf('.js') > -1) {\n            result = hash[src.replace(/.js$/, '')];\n          } else {\n            iscss = true;\n            result = hash[src.replace(/.css$/, '')];\n          } \n          result = result == null ? self.static + src : self.static + result;\n          return result = iscss ? result.replace('.js', '.css') : result;\n        }\n        return self.static + src;\n      } catch (e) {\n        return self.static + src;\n      }\n    });\n  };\n\n  // 公用处理\n  async __before() {\n    this.DeviceWidth = 640;\n  };\n\n  // 跳转路径\n  goto(type) {\n    let myroute = type == null ? (!checkMobile(this.userAgent()) ? '' : '.mm.html') : type == 'mm' ? '.mm.html' : '';\n    return `${this.http.controller}/${this.http.action}${myroute}`;\n  };\n};\n"
    ]
}